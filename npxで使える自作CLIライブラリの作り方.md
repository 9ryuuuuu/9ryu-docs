# ğŸš€ `npx` ã§ä½¿ãˆã‚‹è‡ªä½œCLIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä½œã‚Šæ–¹ï¼ˆTypeScript + ã‚°ãƒ­ãƒ¼ãƒãƒ«ç’°å¢ƒå¯¾å¿œï¼‰

---

## 1. ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–

```bash
mkdir your-cli
cd your-cli
npm init -y
```

---

## 2. âš™ TypeScript é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰

```bash
npm install --save-dev typescript ts-node @types/node
npx tsc --init
```

ä»¥ä¸‹ã®ã‚ˆã†ã« `tsconfig.json` ã‚’ç·¨é›†ï¼š

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "CommonJS",
    "outDir": "./dist",
    "declaration": true,
    "esModuleInterop": true,
    "strict": true,
    "skipLibCheck": true
  },
  "include": ["src"]
}
```

---

## 3. ğŸ–‹ ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆä½œæˆï¼ˆ`src/index.ts`ï¼‰

```ts
#!/usr/bin/env node

console.log("Hello from your CLI!");
```

ğŸ”º ä¸€è¡Œç›®ã® `#!/usr/bin/env node` ã¯ã€CLIã¨ã—ã¦ç›´æ¥å®Ÿè¡Œå¯èƒ½ã«ã™ã‚‹ãŸã‚ã«å¿…é ˆï¼

---

## 4. ğŸ“¦ `package.json` ã®è¨­å®š

```json
{
  "name": "your-cli",
  "version": "1.0.0",
  "main": "dist/index.js",
  "bin": {
    "your-cli": "./dist/index.js"
  },
  "type": "commonjs",
  "scripts": {
    "build": "tsc"
  },
  "devDependencies": {
    "@types/node": "...",
    "ts-node": "...",
    "typescript": "..."
  }
}
```

â˜‘ `bin` ã«æŒ‡å®šã—ãŸåå‰ãŒã€`npx your-cli` ã‚„ `your-cli` ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦å‘¼ã³å‡ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼

---

## 5. ğŸ”§ `npm` ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šï¼ˆsudoä¸è¦ã«ã™ã‚‹ï¼‰

### ãªãœå¿…è¦ï¼Ÿ
é€šå¸¸ã€`npm link` ã‚„ `npm install -g` ã¯ `/usr/local/...` ã«æ›¸ãè¾¼ã‚€ãŸã‚ **`sudo` ãŒå¿…è¦**ã«ãªã‚Šã¾ã™ã€‚  
é–‹ç™ºåŠ¹ç‡ã‚’ä¸Šã’ã€å®‰å…¨ã«æ“ä½œã™ã‚‹ãŸã‚ã«ã€**npm ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¤‰æ›´**ã—ã¾ã™ã€‚

### è¨­å®šæ‰‹é †

```bash
mkdir ~/.npm-global
npm config set prefix ~/.npm-global
```

`~/.bashrc`, `~/.zshrc` ãªã©ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

```bash
export PATH="$HOME/.npm-global/bin:$PATH"
```

åæ˜ ï¼š

```bash
source ~/.zshrc  # ã¾ãŸã¯ ~/.bashrc
```

âœ” ã“ã®è¨­å®šã«ã‚ˆã‚Šã€`npm link` ã‚‚ `npm install -g` ã‚‚ `sudo` ãªã—ã§ä½¿ãˆã¾ã™ï¼

---

## 6. ğŸ”¨ ãƒ“ãƒ«ãƒ‰

```bash
npm run build
```

â†’ `dist/` ã« `.js` ãŠã‚ˆã³ `.d.ts` ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

---

## 7. ğŸ§ª ãƒ­ãƒ¼ã‚«ãƒ«ã§ `npx` é¢¨ã«å‹•ä½œç¢ºèª

```bash
npm link         # ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒªãƒ³ã‚¯ä½œæˆï¼ˆ~/.npm-global ä»¥ä¸‹ã«åæ˜ ï¼‰
your-cli         # ã¾ãŸã¯ npx your-cli
```

âœ… `npm link` ã«ã‚ˆã‚Šã€é–‹ç™ºä¸­ã®CLIã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚³ãƒãƒ³ãƒ‰ã®ã‚ˆã†ã«ä½¿ãˆã¾ã™ã€‚

---

## 8. ğŸ§¹ ãƒªãƒ³ã‚¯ã®è§£é™¤

```bash
npm unlink -g your-cli
```

âœ… `npm unlink -g` ã§ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒªãƒ³ã‚¯ã‚’å‰Šé™¤ã§ãã¾ã™ã€‚

ç¢ºèªç”¨ï¼š

```bash
npm list -g --depth=0
```

---

## 9. ğŸŒ æœ¬ç•ªå…¬é–‹ï¼ˆå¿…è¦ãªã‚‰ï¼‰

```bash
npm login
npm publish
```

â†’ å…¬é–‹å¾Œã¯ç¤¾å†…ã‚„ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒï¼š

```bash
npx your-cli
```

ã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## âœ… ã¾ã¨ã‚ï¼šCLIãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½œæˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

| ã‚„ã‚‹ã“ã¨ | å†…å®¹ |
|----------|------|
| TypeScriptã§é–‹ç™º | å‹å®‰å…¨ã§ä¿å®ˆæ€§ãŒé«˜ã„ |
| `bin` ã«ã‚³ãƒãƒ³ãƒ‰åæŒ‡å®š | `npx` ã§å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ãªã‚‹ |
| `tsc` ã§ `dist/` ã«ãƒ“ãƒ«ãƒ‰ | å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã¯JSã«å¤‰æ› |
| `npm link` + `~/.npm-global` | sudoä¸è¦ã§é–‹ç™ºä¸­ã«ãƒ†ã‚¹ãƒˆå¯èƒ½ |
| `npm unlink -g` | ãã‚Œã„ã«ãƒªãƒ³ã‚¯è§£é™¤ã§ãã‚‹ |

---

ã“ã®æ§‹æˆã§é€²ã‚ã‚Œã°ã€ç¤¾å†…ç”¨ãƒ»ç¤¾å¤–ç”¨å•ã‚ãšã€ã‚¯ãƒªãƒ¼ãƒ³ãª `npx` CLIãƒ„ãƒ¼ãƒ«ãŒä½œã‚Œã¾ã™ã€‚  
ã‚‚ã£ã¨é«˜åº¦ãªCLIï¼ˆå¼•æ•°è§£æãƒ»ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãƒ»è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ï¼‰ã‚’ã—ãŸã„ã¨ãã‚‚ã€ã„ã¤ã§ã‚‚ç›¸è«‡ã—ã¦ãã ã•ã„ã­ï¼